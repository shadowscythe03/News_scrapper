schema: '2.0'
stages:
  data_collection:
    cmd: python scripts/run_scraping.py
    deps:
    - path: configs/config.yaml
      hash: md5
      md5: 9dddb8a9870b627b67abe0a3f05d7e4f
      size: 1770
    - path: src/scraping/news_scraper.py
      hash: md5
      md5: 9baefdfccf9045dbe722f678a0915b75
      size: 11480
    outs:
    - path: data/raw/articles.db
      hash: md5
      md5: 048d56cc09625f76ec82e233aae7e8df
      size: 753664
  data_preprocessing:
    cmd: python scripts/preprocess_data.py
    deps:
    - path: data/raw/articles.db
      hash: md5
      md5: 048d56cc09625f76ec82e233aae7e8df
      size: 753664
    - path: src/classification/classifier.py
      hash: md5
      md5: b5ef13bde85b5724ad5adec3f623d1ca
      size: 19899
    outs:
    - path: data/processed/features.pkl
      hash: md5
      md5: cbb7bcc626455c79d0ddf96f535fcce3
      size: 230
    - path: data/processed/training_data.csv
      hash: md5
      md5: 14314c4ab2f03efb73008e41abe5ade5
      size: 926056
  model_training:
    cmd: python scripts/train_models.py
    deps:
    - path: configs/config.yaml
      hash: md5
      md5: 9dddb8a9870b627b67abe0a3f05d7e4f
      size: 1770
    - path: data/processed/training_data.csv
      hash: md5
      md5: 14314c4ab2f03efb73008e41abe5ade5
      size: 926056
    - path: src/classification/classifier.py
      hash: md5
      md5: b5ef13bde85b5724ad5adec3f623d1ca
      size: 19899
    params:
      params.yaml:
        classification.training:
          batch_size: 16
          epochs: 3
          learning_rate: 2e-05
          max_length: 512
    outs:
    - path: models/label_encoder.joblib
      hash: md5
      md5: 0a24fe6c43b2fc36fb2e7c2e13415bee
      size: 498
    - path: models/metrics.json
      hash: md5
      md5: ee10f3ffec3e485fa2cd2f35e83483fa
      size: 106
    - path: models/sklearn_classifier.joblib
      hash: md5
      md5: 4a9a5911f7af5c6cbd22b6129841f0da
      size: 125823
    - path: models/tfidf_vectorizer.joblib
      hash: md5
      md5: e9923b19fe23c9f34e0a16db987d8d99
      size: 200126
  classification:
    cmd: python scripts/classify_articles.py
    deps:
    - path: data/raw/articles.db
      hash: md5
      md5: 048d56cc09625f76ec82e233aae7e8df
      size: 753664
    - path: models/label_encoder.joblib
      hash: md5
      md5: 0a24fe6c43b2fc36fb2e7c2e13415bee
      size: 498
    - path: models/sklearn_classifier.joblib
      hash: md5
      md5: 4a9a5911f7af5c6cbd22b6129841f0da
      size: 125823
    - path: models/tfidf_vectorizer.joblib
      hash: md5
      md5: e9923b19fe23c9f34e0a16db987d8d99
      size: 200126
    - path: src/classification/classifier.py
      hash: md5
      md5: b5ef13bde85b5724ad5adec3f623d1ca
      size: 19899
    outs:
    - path: data/processed/classified_articles.csv
      hash: md5
      md5: b632a00a81bebfcec615d4d24359d801
      size: 85
  evaluation:
    cmd: python scripts/evaluate_model.py
    deps:
    - path: data/processed/classified_articles.csv
      hash: md5
      md5: b632a00a81bebfcec615d4d24359d801
      size: 85
    - path: models/sklearn_classifier.joblib
      hash: md5
      md5: 4a9a5911f7af5c6cbd22b6129841f0da
      size: 125823
    outs:
    - path: evaluation/classification_report.txt
      hash: md5
      md5: 0efc30d900fdaa6e8cd068473f3baa5c
      size: 470
    - path: evaluation/confusion_matrix.png
      hash: md5
      md5: 369cbc0f56be4bf3a1fcd728dc9e0a19
      size: 112161
    - path: evaluation/metrics.json
      hash: md5
      md5: 5a37e43dc4bdbfe15204017e1094c0e1
      size: 1199
